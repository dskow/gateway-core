server:
  port: 8080
  read_timeout: 15s
  write_timeout: 15s
  shutdown_timeout: 10s

logging:
  output: "stdout"
  body_logging: true
  max_body_log_bytes: 2048

metrics:
  enabled: true
  path: "/metrics"

rate_limit:
  requests_per_second: 100
  burst_size: 50

auth:
  enabled: true
  jwt_secret: "${JWT_SECRET}"
  issuer: "https://auth.example.com"
  audience: "api-gateway"
  scopes: ["read", "write"]

admin:
  enabled: true
  ip_allowlist: ["0.0.0.0/0"]

routes:
  - path_prefix: "/api/users"
    backend: "http://users-service:3001"
    strip_prefix: true
    methods: ["GET", "POST", "PUT", "DELETE"]
    auth_required: true
    timeout_ms: 5000
    retry_attempts: 2

  - path_prefix: "/api/analytics"
    backend: "http://analytics-service:3002"
    strip_prefix: true
    methods: ["GET", "POST"]
    auth_required: true
    timeout_ms: 10000
    headers:
      X-Source: "gateway"

  - path_prefix: "/public"
    backend: "http://users-service:3001"
    strip_prefix: true
    methods: ["GET"]
    auth_required: false
    timeout_ms: 5000
    log_level: "debug"

  - path_prefix: "/health"
    backend: "http://users-service:3001"
    methods: ["GET"]
    auth_required: false
    timeout_ms: 2000
    log_level: "none"
